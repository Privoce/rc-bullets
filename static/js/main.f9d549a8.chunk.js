(this["webpackJsonprc-bullets-example"]=this["webpackJsonprc-bullets-example"]||[]).push([[0],{31:function(e,n,t){e.exports=t.p+"static/media/avator.83885266.jpg"},42:function(e,n,t){e.exports=t(60)},60:function(e,n,t){"use strict";t.r(n);var a=t(0),o=t.n(a),r=t(25),i=t.n(r),l=t(26),c=t(27),s=t(7),u=t(1),g=t.n(u),m=t(13),b=t.n(m),d=t(28);function f(e){return(f="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function h(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var y=function e(n){if(n){var t=document.createElement("style");t.id="BULLET_ANIMATE",document.head.appendChild(t);var a=n.getBoundingClientRect().width,o="from { visibility: visible; transform: translateX(".concat(a,"px); }");t.sheet.insertRule("@keyframes barrage { ".concat(o," ").concat("to { visibility: visible; transform: translateX(-100%); }"," }"),0),window.onresize=function(){document.getElementById("BULLET_ANIMATE").remove(),e(n)}}},v=function(e){if(null!==(a=e)&&("function"===typeof a||"object"===f(a))){var n=e.msg,t=e.img;return g.a.createElement(g.a.Fragment,null,t&&g.a.createElement("p",{className:"head"},g.a.createElement("img",{src:t,alt:"msg head"})),g.a.createElement("p",{className:"msg"},n))}var a;throw Error("Invalid params")};function w(){var e,n,t=(e=["\n  padding: 8px 18px;\n  border: 2px solid #fff;\n  border-radius: 26px;\n  background-color: ",";\n  max-width: 40vw;\n  position: relative;\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);\n  .msg {\n    font-size: 22px;\n    line-height: 1.4;\n    color: ",";\n  }\n  .head {\n    position: absolute;\n    left: -58px;\n    top: 50%;\n    transform: translateY(-50%);\n    width: 40px;\n    height: 40px;\n    border-radius: 50%;\n    border: 2px solid #eee;\n    box-shadow: 0 0 10px rgba(0, 0, 0, 0.8);\n    img {\n      border-radius: 50%;\n      width: 100%;\n      height: 100%;\n    }\n    &:after {\n      position: absolute;\n      top: 50%;\n      right: -14px;\n      transform: translateY(-50%);\n      content: '';\n      display: block;\n      width: 8px;\n      height: 2px;\n      background: #fff;\n    }\n  }\n"],n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}})));return w=function(){return t},t}var x=d.a.div(w(),(function(e){return e.bgColor}),(function(e){return e.color})),E={pauseOnHover:!0,loopCount:"infinite",duration:10,color:"#fff",bgColor:"rgba(2,2,2,.4)",animateTimeFun:"linear"},j=function(){function e(n){if(function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),h(this,"target",null),h(this,"bullets",[]),h(this,"allPaused",!1),h(this,"allHide",!1),"string"===typeof n){if(this.target=document.querySelector(n),!this.target)throw new Error("The display target does not exist")}else{if(!(n instanceof HTMLElement))throw new Error("The display target of the barrage must be set");this.target=n}"static"===getComputedStyle(this.target).position&&(this.target.style.position="relative",this.target.style.overflow="hidden"),y(this.target)}var n,t,a;return n=e,(t=[{key:"push",value:function(e){var n=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:E,a=Object.assign(E,t),o=a.duration,r=a.loopCount,i=a.animateTimeFun,l=a.pauseOnHover,c=a.color,s=a.bgColor,u=this.target.getBoundingClientRect(),m=u.height,d=document.createElement("div");d.id=(new Date).getTime(),this.target.appendChild(d),this.bullets.push(d),d.style.transitionProperty="opacity",d.style.transitionDuration="1s",d.style.cursor="pointer",d.style.position="absolute",d.style.left=0,d.style.zIndex=9,d.style.visibility="hidden",d.style.animationName="barrage",d.style.animationIterationCount=r,d.style.animationDuration="".concat(o,"s"),d.style.animationTimingFunction=i,d.style.willChange="transform",this.allHide&&(d.style.opacity=0),l&&(d.addEventListener("mouseenter",(function(){console.log("enter"),d.style.animationPlayState="paused"}),!1),d.addEventListener("mouseleave",(function(){console.log("leave"),n.allPaused||(d.style.animationPlayState="running")}),!1)),b.a.render(g.a.isValidElement(e)||"string"===typeof e?e:g.a.createElement(x,{color:c,bgColor:s},v(e)),d,(function(){var e=d.getBoundingClientRect().height;d.style.top=Math.random()*(m-e)+"px"})),d.addEventListener("animationend",(function(){n.bullets=n.bullets.filter((function(e){return e.id!==d.id})),b.a.unmountComponentAtNode(d),d.remove()}))}},{key:"pause",value:function(){this.allPaused=!0,this.bullets.forEach((function(e){e.style.animationPlayState="paused"}))}},{key:"resume",value:function(){this.allPaused=!1,this.bullets.forEach((function(e){e.style.animationPlayState="running"}))}},{key:"hide",value:function(){this.allHide=!0,this.bullets.forEach((function(e){e.style.opacity=0}))}},{key:"show",value:function(){this.allHide=!1,this.bullets.forEach((function(e){e.style.opacity=1}))}},{key:"clear",value:function(){this.bullets.forEach((function(e){b.a.unmountComponentAtNode(e),e.remove()}))}}])&&p(n.prototype,t),a&&p(n,a),e}();function C(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}var O=null;function I(){var e=Object(a.useState)(!1),n=Object(s.a)(e,2),t=n[0],r=n[1],i=Object(a.useState)(!0),u=Object(s.a)(i,2),g=u[0],m=u[1];Object(a.useEffect)((function(){return O=new j(".screen"),window.onstorage=function(e){console.log("The "+e.key+" key has been changed from "+e.oldValue+" to "+e.newValue+".");try{var n=JSON.parse(e.newValue),t=n.txt,a=n.img,o=void 0===a?null:a,r=Object(c.a)(n,["txt","img"]),i=o?{msg:t,img:o}:t;console.log({newValue:i}),i&&O.push(i,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?C(t,!0).forEach((function(n){Object(l.a)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):C(t).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({},r))}catch(s){throw Error("parse json error")}},function(){window.onstorage=null}}),[]);return o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{onClick:function(){t?O.resume():O.pause(),r(!t)}},t?"resume":"pause"),o.a.createElement("button",{onClick:function(){O.clear()}},"clear"),o.a.createElement("button",{onClick:function(){g?O.hide():O.show(),m(!g)}},g?"hide":"show"),o.a.createElement("section",{style:{height:"60vh"},className:"screen"}))}var P=t(12),S=t(10),k={yingbai:{color:"rgb(22,22,2)",bgColor:"rgba(227,249,253,.8)"},chabai:{color:"rgb(22,22,2)",bgColor:"rgba(243,249,241,.8)"},weilan:{color:"rgb(22,22,2)",bgColor:"rgba(112,243,255,.9)"},zise:{color:"rgb(233, 241, 246)",bgColor:"rgba(141,75,187,.8)"},fense:{color:"rgb(22,22,2)",bgColor:"rgba(255,179,167,.8)"},yanzhi:{color:"rgb(233, 241, 246)",bgColor:"rgba(157,41,51,.8)"},tong:{color:"rgb(233, 241, 246)",bgColor:"rgba(243,83,54,.8)"},yinhong:{color:"rgb(233, 241, 246)",bgColor:"rgba(190,0,47,.8)"}},N=function(){var e=Object.keys(k);return e[Math.floor(Math.random()*e.length)]},z=["linear","ease","ease-in-out","ease-out","ease-in","cubic-bezier(0.2,-2,0.8,2)","steps(10, end)"],B=t(31),T=t.n(B);function A(){var e=Object(P.a)(["\n  position: relative;\n  height: 100vh;\n  padding: 2rem 4rem;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  .input,\n  .sendBtn,\n  .dur,\n  .img {\n    border-radius: 0.5rem;\n    border: 1px solid #333;\n  }\n  .input,\n  .dur,\n  .img {\n    padding: 0.5rem 0.8rem;\n    margin-bottom: 2rem;\n  }\n  .sendBtn {\n    cursor: pointer;\n    text-transform: uppercase;\n    color: #fff;\n    background: rgba(2, 2, 2, 0.4);\n    font-size: 1.5rem;\n    font-weight: bold;\n    padding: 0.4rem 0.6rem;\n    border: 2px solid #fff;\n  }\n  .demo {\n    text-transform: uppercase;\n    padding: 4px 8px;\n    font-size: 1.5rem;\n    font-weight: 800;\n    position: absolute;\n    top: 5px;\n    right: 5px;\n  }\n"]);return A=function(){return e},e}var M=S.default.section(A());function H(){var e=Object(a.useState)(""),n=Object(s.a)(e,2),t=n[0],r=n[1],i=Object(a.useState)("random"),l=Object(s.a)(i,2),c=l[0],u=l[1],g=Object(a.useState)("linear"),m=Object(s.a)(g,2),b=m[0],d=m[1],f=Object(a.useState)(20),p=Object(s.a)(f,2),h=p[0],y=p[1],v=Object(a.useState)(""),w=Object(s.a)(v,2),x=w[0],E=w[1];return o.a.createElement(M,null,o.a.createElement("a",{className:"demo",target:"_blank",href:"preview"},"preview"),o.a.createElement("select",{className:"img",value:x,onChange:function(e){var n=e.target.value;console.log({value:n}),E(n)}},o.a.createElement("option",{value:""},"select head image"),o.a.createElement("option",{value:T.a},"girl"),o.a.createElement("option",{value:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K"},"react")),o.a.createElement("select",{className:"theme",value:c,onChange:function(e){var n=e.target.value;console.log({value:n}),u(n)}},o.a.createElement("option",{value:"random"},"random theme"),Object.keys(k).map((function(e){return o.a.createElement("option",{key:e,value:e},e)}))),o.a.createElement("select",{className:"animateFun",value:b,onChange:function(e){var n=e.target.value;console.log({value:n}),d(n)}},z.map((function(e){return o.a.createElement("option",{key:e,value:e},e)}))),o.a.createElement("input",{className:"dur",value:h,onChange:function(e){var n=e.target.value;console.log({value:n}),y(n)},type:"number",placeholder:"duration"}),o.a.createElement("textarea",{rows:"4",className:"input",value:t,onChange:function(e){var n=e.target.value;console.log(n),r(n)},placeholder:"input bullet"}),o.a.createElement("button",{className:"sendBtn",onClick:function(){if(console.log("current bullet",t),t){console.log("start send");var e="random"==c?N():c,n=k[e],a=n.color,o=n.bgColor,i=JSON.stringify({animateTimeFun:b,txt:t,duration:h,img:x,color:a,bgColor:o,ts:(new Date).getTime()});console.log({newV:i}),localStorage.setItem("BULLET",i),r("")}}},"send"))}var G=t(34),L=t(8),Z=function(){return o.a.createElement(G.a,{basename:"/rc-bullets"},o.a.createElement(L.c,null,o.a.createElement(L.a,{path:"/",exact:!0,component:H}),o.a.createElement(L.a,{path:"/preview",component:I})))},F=t(37),D=t.n(F);function Y(){var e=Object(P.a)(["\n  ",'\n  *{\n    box-sizing:border-box;\n    user-select:none;\n    outline:none;\n    -webkit-text-size-adjust: none;\n    -webkit-tap-highlight-color: rgba(0,0,0,0);\n    color:#000;\n  }\n  html{\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n    font-family:"Fangzheng ZY", "Hiragino Sans GB", "Heiti SC", "Microsoft YaHei", "WenQuanYi Micro Hei";\n  }\n  body{\n    -webkit-overflow-scrolling: touch;\n    overflow:scroll;\n    margin:0 auto;\n    min-height:100vh;\n    position: relative;\n  }\n  #root{\n    min-height:100vh;\n    background-image:linear-gradient(135deg, rgb(96, 108, 136) 0%, rgb(63, 76, 107) 100%);\n  }\n\n  @media screen and (min-width: 320px){\n      html {\n          font-size: 12px;\n      }\n  }\n  @media screen and (min-width: 375px){\n      html {\n          font-size: 14px;\n      }\n  }\n  @media screen and (min-width: 480px){\n      html {\n          font-size: 20px;\n      }\n  }\n  @media screen and (min-width: 768px){\n      html {\n          font-size: 24px;\n      }\n  }\n']);return Y=function(){return e},e}var R=Object(S.createGlobalStyle)(Y(),D.a);i.a.render(o.a.createElement(o.a.Fragment,null,o.a.createElement(R,null),o.a.createElement(Z,null)),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.f9d549a8.chunk.js.map